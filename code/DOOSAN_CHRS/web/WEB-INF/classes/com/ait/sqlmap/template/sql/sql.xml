<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="sqlmap.template">
	
	<!-- test sqlmap -->
	<select id="testSqlMap" parameterClass="SimpleMap" resultClass="PersonBean">
	<![CDATA[
				SELECT 127	   ID,
					   'kelly' NAME,
					   '男'	   SEX,
					   $sqlStatement$
				  FROM DUAL
				 WHERE 1 = #condition#
				  
			]]>
	</select>
	
	<!-- Retrieve attendance item list -->
	<select id="RetrieveArItemList"  parameterClass="SimpleMap" resultClass="SimpleMap">
	<![CDATA[
				SELECT ITEM_NO,
  					   ITEM_NAME,
  					   SHORT_NAME,
  					   NVL(DESCRIPTION,'无'),
  					   ACTIVITY,
  					   CREATE_DATE,
  					   CREATED_BY,
  					   UPDATE_DATE,
  					   UPDATED_BY,
  					   MIN_UNIT
				  FROM AR_ITEM A
				 WHERE A.ITEM_NAME LIKE '%' || #ITEM_NAME# || '%'
			]]>
		<isNotEmpty prepend="AND" property="ITEM_NO">
			A.ITEM_NO = #ITEM_NO# 
		</isNotEmpty>
	</select>
	
	<!-- Retrieve attendance item list count -->
	<select id="RetrieveArItemListCnt"  parameterClass="SimpleMap" resultClass="SimpleMap">
	<![CDATA[
				SELECT COUNT(*) CNT
				  FROM AR_ITEM A
				 WHERE A.ITEM_NAME LIKE '%' || #ITEM_NAME# || '%'
			]]>
		<isNotEmpty prepend="AND" property="ITEM_NO">
			A.ITEM_NO = #ITEM_NO# 
		</isNotEmpty>
	</select>
	
	<!-- Retrieve attendance item name -->
	<select id="RetrieveArItemName"  parameterClass="int" resultClass="string">
	<![CDATA[
				SELECT ITEM_NAME
				  FROM AR_ITEM A
				 WHERE A.ITEM_NO = #ITEM_NO#
			]]>
	</select>
	
	
	<!-- insert data for AR_ITEM table -->
	<insert id="InsertArItem"  parameterClass="SimpleMap">
	<![CDATA[
			INSERT INTO AR_ITEM
		            (ITEM_NO, ITEM_NAME, SHORT_NAME, DESCRIPTION, ACTIVITY,
		             CREATE_DATE, CREATED_BY, UPDATE_DATE, UPDATED_BY, MIN_UNIT
		            )
		     VALUES (#ITEM_NO#, #ITEM_NAME#, #SHORT_NAME#, #DESCRIPTION#, #ACTIVITY#,
		             SYSDATE, #CREATED_BY#, SYSDATE, #UPDATED_BY#, #MIN_UNIT#
		            )			
	]]>
	</insert>
	
	<!-- update item name for AR_ITEM table -->
	<update id="UpdateArItemName"  parameterClass="SimpleMap">
	<![CDATA[
			   UPDATE AR_ITEM 
				  SET ITEM_NAME = #ITEM_NAME#
				WHERE ITEM_NO = #ITEM_NO#
			]]>
	</update>
	
	<!-- update item no for AR_ITEM table -->
	<update id="UpdateArItemNo"  >
	<![CDATA[
			   UPDATE AR_ITEM 
				  SET ITEM_NO = 100
				WHERE ITEM_NO = 100
			]]>
	</update>
	
	<!-- Retrieve post list -->
	<select id="retrievePostList" resultClass="SimpleMap">
	<![CDATA[
				SELECT "职务ID" POST_ID,
					   "职务名称" POST_NAME,
					   "职务英文名称" POST_EN_NAME,
					   "职群" POST_GROUP
				  FROM T_HR_POST
			]]>
	</select>
	
	<!-- insert education information -->
	<insert id="insertEducationInfo" parameterClass="Education" >
		<![CDATA[
		 INSERT INTO HR_EDUCATION A
  		     ( 	 EDUC_NO,
		  		 EMPID,
		  		 SUBJECT,
		  		 DEGREE_CODE,
		  		 DEGREE_TYPE,
		  		 INSTITUTION_NAME,
		  		 RANK,
		  		 EDUC_CARD_NO,
		  		 EXPENSE,
		  		 START_DATE,
		  		 END_DATE,
		  		 A.CREATE_DATE,
		  		 A.CREATED_BY,
		  		 A.UPDATE_DATE,
		  		 A.UPDATED_BY,
		  		 A.ORDERNO,
		  		 A.ACTIVITY
		     )
	   VALUES(	 HR_EDU_SEQ.NEXTVAL,
	   			 #empID#,
				 #subjectCode#,
				 #degreeCode#,
				 #degreeType:VARCHAR#,
				 #institutionName#,
				 #rank:NUMERIC#,
				 #eduCardNo:VARCHAR#,
				 #expense:NUMERIC#,
				 TO_DATE(#startDate#,'YYYY-MM-DD'),
				 TO_DATE(#endDate#,'YYYY-MM-DD'),
				 SYSDATE,
				 #creatorID:VARCHAR#,
				 SYSDATE,
				 #modifierID:VARCHAR#,
				 #orderNo:NUMERIC#,
				 #activity:NUMERIC#
	   		  )		 	 
	   		]]>
	</insert>
	
	<!-- create table test -->
	<update id="createTableTest">
	<![CDATA[
	
		CREATE   TABLE   AR_ANNUAL_HOLIDAY_I   AS   SELECT   *   FROM   AR_ANNUAL_HOLIDAY   WHERE   0=1
		  ]]>
	</update>
	
	<!-- insert post information -->
	<insert id="insertPostInfo" parameterClass="SimpleMap" >
		<![CDATA[
	 INSERT INTO T_HR_POST
	 				("职务ID","职务名称","职务英文名称","职群")
	          VALUES (#POST_ID#,
			  		  #POST_NAME#,
					  #POST_EN_NAME#,
					  #POST_GROUP#)     
		   		]]>
	</insert>
	
	<!-- Retrieve post list for sqlserver-->
	<select id="retrievePostListForSqlserver" resultClass="SimpleMap">
	<![CDATA[
				SELECT EMPLYID,CARDNO,SERIAL FROM PB_EMPLY
			]]>
	</select>
	
</sqlMap>